---

interface CurrentTest {
	label: string;
	path: string;
}

// Import all test files in the current directory that match the pattern '*-test.astro'
const testFilesPaths: Record<string, unknown> = import.meta.glob('./*-test.astro', { eager: true });

// Get the file paths and filter out the template test file itself
// Then, remove the '.astro' extension for easier handling
const testFiles: string[] = Object.keys(testFilesPaths)
	.filter((path) => path !== './_template-test.astro')
	.map((path) => path.replace('.astro', ''));

// Create an array of current tests with labels and paths for rendering in the UI
const currentTests: CurrentTest[] = testFiles.map((path) => ({
	label: path
		.replace('./', '')
		.replace(/-test/g, '')
		.replace(/\b\w/g, (c) => c.toUpperCase()),

	path: `/${path.replace('./', '')}`,
}));
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Test Fixtures</title>
	</head>
	<body>
		<h1>Available Test Fixtures</h1>
		<ul>
			{currentTests.map(({ label, path }) => (
				<li>
					<a href={path}>{label}</a>
				</li>
			))}
		</ul>
	</body>
</html>
